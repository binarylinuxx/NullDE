# Picom configuration with Material Design enhancements
backend = "glx";
glx-no-stencil = true;
glx-no-rebind-pixmap = true;
use-damage = true;

# Blur settings (optimized for performance)
blur: {
  method = "dual_kawase";
  strength = 6;
  deviation = 1.0;
  kernel = "7x7box";
  blur-background-exclude = [
    "class_g = 'Polybar'",
    "window_type = 'dock'",
    "window_type = 'desktop'",
    "window_type = 'dropdown_menu'",
    "window_type = 'popup_menu'",
    "window_type = 'tooltip'",
    "name *= 'rofi'",
    "name *= 'dmenu'"
  ];
};

# Corner radius (consistent with Material Design)
corner-radius = 20;
rounded-corners-exclude = [
  "class_g = 'Polybar'",
  "window_type = 'dock'",
  "window_type = 'notification'",
  "class_g = 'Rofi'",
  "class_g ?= 'Dmenu'"
];

# Shadows (subtle Material elevation)
shadow = true;
shadow-radius = 0;
shadow-opacity = 0.22;
shadow-offset-x = -8;
shadow-offset-y = -8;
shadow-exclude = [
  "class_g = 'Polybar'",
  "class_g ?= 'Notify-osd'",
  "class_g = 'Cairo-clock'",
  "name = 'Notification'",
  "name *= 'rofi'",
  "class_g *= 'Rofi'",
  "window_type *= 'menu'",
  "window_type = 'dropdown_menu'",
  "window_type = 'popup_menu'",
  "window_type = 'tooltip'"
];

# ===========================
# ANIMATIONS (Original Picom)
# ===========================
animations = true;

# Window Open/Close
animations = true;
animations = (
  {
    triggers    = [ "open" ];
    preset      = "slide-in";
    direction   = "up";
    duration    = 0.1;
  },
  {
  	triggers = [ "close" ];
  preset = "slide-out";
  direction = "up";
  duration = 0.15;
  }
);

# Fading (subtle transitions)
fading = true;
fade-in-step = 0.03;
fade-out-step = 0.03;
fade-delta = 5;
fade-exclude = [ "class_g = 'Polybar'" ];

# Window opacity rules
opacity-rule = [
  "85:class_g = 'Alacritty' && focused",
  "80:class_g = 'Alacritty' && !focused",
  "90:class_g = 'Code' && focused",
  "85:class_g = 'Code' && !focused",
  "100:class_g = 'Polybar'"
];

# VSync for tear-free experience
vsync = true;
